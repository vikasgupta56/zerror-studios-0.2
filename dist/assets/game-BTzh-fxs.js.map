{"version":3,"file":"game-BTzh-fxs.js","sources":["../../src/javascripts/game.js"],"sourcesContent":["const canvas = document.getElementById(\"physicsCanvas\");\r\n\r\nconst engine = Matter.Engine.create();\r\nconst world = engine.world;\r\n\r\nconst render = Matter.Render.create({\r\n    canvas: canvas,\r\n    engine: engine,\r\n    options: {\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n        wireframes: false,\r\n        background: \"transparent\"\r\n    }\r\n});\r\n\r\nconst ground = Matter.Bodies.rectangle(\r\n    window.innerWidth / 2,\r\n    window.innerHeight - 30,\r\n    window.innerWidth,\r\n    20,\r\n    {\r\n        isStatic: true,\r\n        render: {\r\n            visible: false\r\n        }\r\n    }\r\n);\r\n\r\nconst walls = [\r\n    Matter.Bodies.rectangle(-10, window.innerHeight / 2, 20, window.innerHeight, { isStatic: true }),\r\n    Matter.Bodies.rectangle(window.innerWidth + 10, window.innerHeight / 2, 20, window.innerHeight, { isStatic: true })\r\n];\r\n\r\nMatter.World.add(world, [ground, ...walls]);\r\n\r\n// Rock image URLs\r\nconst imageUrls = [\r\n    \"https://imgs.search.brave.com/GllfTkMBcFBRKZj_KP1LHLMFEz6o5quKsyTj3Hzm4dI/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly93YWxs/cGFwZXJzLmNvbS9p/bWFnZXMvaGQvZm9z/c2lsaXplZC1yb2Nr/LWRpc2NvdmVyeS1w/bmctNTQtMWJvaWV6/NWo5aWs5NGY1Zy5w/bmc\",\r\n    \"https://imgs.search.brave.com/1RfhQhtrpJGwYYUUsmsaoD_IDtlTVZ4-DHud1JIfQhA/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9wbmdj/b3JlLmNvbS9maWxl/cy9wcmV2aWV3Lzkw/MHg3NjcvMTE3MjY5/MTcyNTFzeDVuZmQw/djZud3JzcDNxcXly/cm4zdDJmcHFhMWVu/enQ2YThhajh0b2lm/NzVpcHY0b2F1djNs/eGp3eWE5bXRxY2Ry/djN1MG9xb2tzMHdy/bTdnb2tqemtxc3dr/dDJoZTJxcmFqLnBu/Zw\",\r\n    \"https://imgs.search.brave.com/FU83wZUXmSatFBzj4Bltv7ZFRcPuy10vLlGSVWGjMP8/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly93YWxs/cGFwZXJzLmNvbS9p/bWFnZXMvaGQvZm9z/c2lsaXplZC1yb2Nr/LWRpc2NvdmVyeS1w/bmctMDUwMzIwMjQt/OGF2amVobmFqbmhn/NGhkcy5wbmc\",\r\n    \"https://imgs.search.brave.com/eA2SGMdS3CTfcIFg-HhOUukQbGwBKkY-cDoEeOg4TEs/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9wbmdj/b3JlLmNvbS9maWxl/cy9wcmV2aWV3LzEy/ODB4ODA0LzExNzI2/OTE3MjkwNTI1ZHdm/OXFxeDNsY2wxNDhr/bGxjdDRrY2h3Z25o/Z251b3J2MTAzMGRi/aGpqbzBrOHh1cGRm/bG03cWNxdW5pYmM1/b2dzeWx4OXM2MDE1/dWo1cXR2eXk5OWpw/eTI5aGlveHB1cC5w/bmc\",\r\n    \"https://imgs.search.brave.com/1iv8TOH3cz0YqDNqywUIqvB4uB81Yf6MJYDY5iOyZUM/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly93YWxs/cGFwZXJzLmNvbS9p/bWFnZXMvaGQvaWdu/ZW91cy1yb2NrLWRl/dGFpbC1wbmctcHV3/OTIteDNoOTZrNXB0/OXRxOTliaC5wbmc\",\r\n    \"https://imgs.search.brave.com/G_psc02mJeq0RUBqiSG5eGLQ_JgfjtqQWvw9o4yVTtk/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9wbmdp/bWcuY29tL3VwbG9h/ZHMvc3RvbmUvc3Rv/bmVfUE5HMTM1NjMu/cG5n\",\r\n    \"https://imgs.search.brave.com/G_psc02mJeq0RUBqiSG5eGLQ_JgfjtqQWvw9o4yVTtk/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9wbmdp/bWcuY29tL3VwbG9h/ZHMvc3RvbmUvc3Rv/bmVfUE5HMTM1NjMu/cG5n\",\r\n    \"https://imgs.search.brave.com/TCSAQKjBTCpedmuz2_fUyjsOTyDpmVsI2KZ5kCC0dxI/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly93d3cu/cG5nYWxsLmNvbS93/cC1jb250ZW50L3Vw/bG9hZHMvNS9TdG9u/ZS1QTkctSW1hZ2Uu/cG5n\"\r\n];\r\n\r\nfunction getRandomImageUrl() {\r\n    return imageUrls[Math.floor(Math.random() * imageUrls.length)];\r\n}\r\n\r\n// Consistent and larger rocks\r\nfunction createImageObject(x, y) {\r\n    const screenWidth = window.innerWidth;\r\n    const size = screenWidth < 800 ? 40 : 80;  // smaller rocks on mobile\r\n    const texture = getRandomImageUrl();\r\n\r\n    return Matter.Bodies.rectangle(x, y, size, size, {\r\n        restitution: 0.7,\r\n        friction: 0.5,\r\n        frictionAir: 0.02,\r\n        density: 0.001,\r\n        inertia: Infinity,\r\n        render: {\r\n            sprite: {\r\n                texture: texture,\r\n                xScale: size / 256,\r\n                yScale: size / 256\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n\r\n// Mouse drag improvement\r\nconst mouse = Matter.Mouse.create(render.canvas);\r\nconst mouseConstraint = Matter.MouseConstraint.create(engine, {\r\n    mouse: mouse,\r\n    constraint: {\r\n        stiffness: 0.9,\r\n        angularStiffness: 0.9,\r\n        render: { visible: false }\r\n    }\r\n});\r\nMatter.World.add(world, mouseConstraint);\r\nrender.mouse = mouse;\r\n\r\nrender.canvas.addEventListener('wheel', (e) => {\r\n    if (!mouseConstraint.mouse.button) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n}, { passive: false });\r\n\r\nlet shapesAdded = false;\r\n\r\nfunction addShapesAndText() {\r\n    if (shapesAdded) return;\r\n    shapesAdded = true;\r\n\r\n    let count = 0;\r\n    const maxPebbles = 14;\r\n    const dropInterval = 250;\r\n\r\n    const interval = setInterval(() => {\r\n        if (count >= maxPebbles) {\r\n            clearInterval(interval);\r\n            return;\r\n        }\r\n\r\n        const x = 100 + Math.random() * (window.innerWidth - 200); // avoid edges\r\n        const y = -200; // higher spawn point\r\n        const pebble = createImageObject(x, y);\r\n        Matter.World.add(world, pebble);\r\n        count++;\r\n    }, dropInterval);\r\n}\r\n\r\nconst runner = Matter.Runner.create();\r\n\r\n\r\nfunction resizeCanvas() {\r\n    const width = window.innerWidth;\r\n    const height = window.innerHeight;\r\n\r\n    // Resize canvas\r\n    render.canvas.width = width;\r\n    render.canvas.height = height;\r\n    render.options.width = width;\r\n    render.options.height = height;\r\n\r\n    // Update ground\r\n    Matter.Body.setPosition(ground, {\r\n        x: width / 2,\r\n        y: height - 30\r\n    });\r\n    Matter.Body.setVertices(ground, [\r\n        { x: 0, y: height - 40 },\r\n        { x: width, y: height - 40 },\r\n        { x: width, y: height - 20 },\r\n        { x: 0, y: height - 20 }\r\n    ]);\r\n\r\n    // Update walls\r\n    Matter.Body.setPosition(walls[0], { x: -10, y: height / 2 });\r\n    Matter.Body.setVertices(walls[0], [\r\n        { x: -20, y: 0 },\r\n        { x: 0, y: 0 },\r\n        { x: 0, y: height },\r\n        { x: -20, y: height }\r\n    ]);\r\n\r\n    Matter.Body.setPosition(walls[1], { x: width + 10, y: height / 2 });\r\n    Matter.Body.setVertices(walls[1], [\r\n        { x: width, y: 0 },\r\n        { x: width + 20, y: 0 },\r\n        { x: width + 20, y: height },\r\n        { x: width, y: height }\r\n    ]);\r\n}\r\nresizeCanvas();\r\nwindow.addEventListener(\"resize\", resizeCanvas);\r\n\r\n\r\n// document.getElementById(\"resetButton\").addEventListener(\"click\", () => {\r\n//   Matter.World.clear(world, false);\r\n//   Matter.World.add(world, [ground, ...walls]);\r\n//   shapesAdded = false;\r\n// });\r\n\r\n\r\n\r\nconst musicBoxes = document.querySelectorAll('.music-box');\r\nconst audioInstances = []; // Store audio instances to reuse later\r\n\r\nmusicBoxes.forEach((box, index) => {\r\n    const audio = new Audio(box.dataset.audio);\r\n    audio.loop = true;\r\n    audioInstances.push(audio); // Save for later access\r\n\r\n    const volumeBar = box.querySelector('.volume');\r\n    const volumeControl = box.querySelector('.volume-control');\r\n    let isDragging = false;\r\n\r\n    const updateVolume = (e) => {\r\n        const rect = volumeBar.getBoundingClientRect();\r\n        let volume = (e.clientX - rect.left) / rect.width;\r\n        volume = Math.max(0, Math.min(1, volume));\r\n\r\n        volumeControl.style.left = (volume * 100) + '%';\r\n        audio.volume = volume;\r\n\r\n        if (volume === 0) {\r\n            audio.pause();\r\n        } else {\r\n            if (audio.paused) audio.play();\r\n        }\r\n    };\r\n\r\n    volumeBar.addEventListener('mousedown', (e) => {\r\n        isDragging = true;\r\n        updateVolume(e);\r\n    });\r\n\r\n    window.addEventListener('mousemove', (e) => {\r\n        if (isDragging) {\r\n            updateVolume(e);\r\n        }\r\n    });\r\n\r\n    window.addEventListener('mouseup', () => {\r\n        isDragging = false;\r\n    });\r\n});\r\n\r\ndocument.querySelectorAll(\"#play-game\").forEach((button) => {\r\n    button.addEventListener(\"click\", function () {\r\n        gsap.to(\"#relax-section\", {\r\n            top: \"0%\",\r\n            duration: 0.6,\r\n        });\r\n\r\n        const volumes = [0.3, 0.2, 0.1];\r\n\r\n        musicBoxes.forEach((box, index) => {\r\n            const audio = audioInstances[index]; // Use the same instance\r\n            const volumeControl = box.querySelector('.volume-control');\r\n            const volume = volumes[index];\r\n\r\n            audio.volume = volume;\r\n            volumeControl.style.left = (volume * 100) + '%';\r\n\r\n            if (audio.paused) {\r\n                audio.play();\r\n            }\r\n        });\r\n\r\n        Matter.Render.run(render);\r\n        Matter.Runner.run(runner, engine);\r\n        addShapesAndText();\r\n    });\r\n});\r\n\r\n\r\nlet isMuted = false;\r\n\r\ndocument.querySelector(\"#mute-music\").addEventListener(\"click\", function () {\r\n    isMuted = !isMuted;\r\n\r\n    musicBoxes.forEach((box, index) => {\r\n        const audio = audioInstances[index];\r\n        const volumeControl = box.querySelector('.volume-control');\r\n\r\n        if (isMuted) {\r\n            // Store current volume so we can restore it\r\n            audio.dataset.prevVolume = audio.volume;\r\n            audio.volume = 0;\r\n            volumeControl.style.left = '0%';\r\n        } else {\r\n            const prevVolume = parseFloat(audio.dataset.prevVolume || 0.3);\r\n            audio.volume = prevVolume;\r\n            volumeControl.style.left = (prevVolume * 100) + '%';\r\n            if (audio.paused) audio.play();\r\n        }\r\n    });\r\n\r\n    // Update button text\r\n  document.querySelectorAll(\"#mute-music\").forEach(el => {\r\n    const icon = document.createElement('i');\r\n    icon.className = isMuted ? 'ri-volume-mute-line' : 'ri-volume-up-line';\r\n\r\n    el.innerHTML = ''; // Clear existing content\r\n    el.appendChild(icon);\r\n});\r\n\r\n});\r\n\r\ndocument.querySelector(\"#close-game\").addEventListener(\"click\", function () {\r\n    gsap.to(\"#relax-section\", {\r\n        top: \"-100%\",\r\n        duration: .6,\r\n    })\r\n    //   Matter.World.clear(world, false);\r\n    //   Matter.World.add(world, [ground, ...walls]);\r\n    //   shapesAdded = false;\r\n})"],"names":["canvas","engine","world","render","ground","walls","imageUrls","getRandomImageUrl","createImageObject","x","y","size","texture","mouse","mouseConstraint","shapesAdded","addShapesAndText","count","maxPebbles","interval","pebble","runner","resizeCanvas","width","height","musicBoxes","audioInstances","box","index","audio","volumeBar","volumeControl","isDragging","updateVolume","e","rect","volume","button","volumes","isMuted","prevVolume","el","icon"],"mappings":"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"}